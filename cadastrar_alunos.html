<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastrar Alunos e Configurações - FitCraft</title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="FitCraft Personal">
    <link rel="apple-touch-icon" href="images/icons/icon-152x152.png">
    <meta name="msapplication-TileImage" content="images/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#2f3e5c">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <button class="btn-voltar" onclick="window.location.href='index.html'" title="Voltar ao menu principal">
                <img src="images/botao_voltar_sem_fundo.png" alt="Voltar">
            </button>
            <img src="images/cabecalho_sem_fundo.png" alt="FitCraft Logo" class="fitcraft-logo-header">
        </header>

        <section class="content-section">
            <h2>Cadastro de Alunos</h2>
            <p>Gerencie o cadastro de novos alunos e configure os detalhes da consultoria.</p>
            
            <div class="form-card">
                <h3>Informações do Aluno</h3>
                <div class="form-group">
                    <label for="nome-aluno-cadastro">Nome Completo</label>
                    <input type="text" id="nome-aluno-cadastro" placeholder="Digite o nome do aluno">
                </div>
                <div class="form-group">
                    <label for="data-cadastro">Data de Início</label>
                    <input type="date" id="data-cadastro">
                </div>
                <div class="form-group">
                    <label for="valor-consultoria">Valor da Consultoria (R$ )</label>
                    <input type="number" id="valor-consultoria" placeholder="Ex: 150.00" step="0.01">
                </div>
                <button class="add-exercise-btn" id="btn-salvar-aluno">Salvar Aluno</button>
            </div>

            <div class="form-card">
                <h3>Alunos Cadastrados</h3>
                <ul id="lista-alunos-cadastrados" class="client-list">
                    <!-- Alunos serão listados aqui dinamicamente pelo JavaScript -->
                </ul>
            </div>
        </section>
    </div>

    <!-- Modal para exibir a credencial gerada -->
    <div id="credential-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Aluno Salvo com Sucesso!</h2>
            <p>Compartilhe esta credencial com o aluno para que ele possa acessar o aplicativo:</p>
            <div class="credential-display">
                <span id="aluno-credencial"></span>
                <button id="copy-credential-btn" title="Copiar para a área de transferência">Copiar</button>
            </div>
        </div>
    </div>
    
    <!-- Toast para notificações (opcional) -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <span class="toast-icon">✓</span>
            <span class="toast-message">Exercício adicionado com sucesso!</span>
        </div>
    </div>
    
    <!-- =================================================================== -->
    <!--                  SEÇÃO DE SCRIPTS - ORDEM CORRETA                   -->
    <!-- =================================================================== -->

    <!-- 1. BIBLIOTECA SUPABASE -->
    <!-- Este script precisa vir primeiro, pois os outros dependem dele. -->
    <!-- Ele fornece o objeto global `supabase` que usamos para criar nosso cliente. -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- 2. CONFIGURAÇÃO DO CLIENTE SUPABASE -->
    <!-- Este é o seu arquivo `supabase-client.js`. -->
    <!-- Ele usa a biblioteca acima para criar uma conexão específica para o seu projeto. -->
    <script src="supabase-client.js"></script>

    <!-- 3. SCRIPT PRINCIPAL DA PÁGINA -->
    <!-- Este é o seu arquivo `cadastrar_alunos_script.js`. -->
    <!-- Ele contém toda a lógica da página (eventos de clique, renderização, etc. ) -->
    <!-- e agora pode usar a variável `supabase` definida no script anterior. -->
    <script src="cadastrar_alunos_script.js"></script>

    <!-- 4. SCRIPT DO SERVICE WORKER (para funcionalidades PWA) -->
    <!-- Este script é independente e pode ser carregado por último. -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registered: ', registration);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html>
